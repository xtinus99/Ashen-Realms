<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ashen Realms</title>
    <link rel="stylesheet" href="style.css?v=54">
    <!-- Tippy.js CSS -->
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/dist/tippy.css">
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- GSAP + Plugins (replaces Anime.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/SplitText.min.js"></script>

    <!-- Floating UI + Tippy.js for tooltips -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <!-- Atropos.js for 3D tilt effects -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/atropos@2/atropos.min.css">
    <script src="https://cdn.jsdelivr.net/npm/atropos@2/atropos.min.js"></script>

    <!-- Medium-Zoom for image viewing -->
    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script>

    <!-- tsParticles for floating ash/ember effects -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

    <!-- Lenis for smooth scrolling -->
    <script src="https://cdn.jsdelivr.net/npm/lenis@1.0.42/dist/lenis.min.js"></script>

    <!-- Splitting.js for text animations -->
    <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting.css">
    <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting-cells.css">
    <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>

    <!-- Three.js + Vanta.js for atmospheric fog -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.fog.min.js"></script>

    <!-- Typed.js for typewriter effects -->
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.16/dist/typed.umd.js"></script>
</head>
<body>
    <!-- Background Effects - Divine Battlefield Shrine -->
    <div class="bg-effects">
        <!-- Vanta.js fog effect -->
        <div id="vanta-fog"></div>
        <div class="bg-gradient"></div>
        <div class="bg-noise"></div>
        <div class="god-rays"></div>
        <div class="bg-vignette"></div>

        <!-- tsParticles ash/ember container -->
        <div id="tsparticles"></div>
    </div>

    <div class="app">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon sigil-icon" id="sigil-icon">
                        <img src="Assets/Sigil.webp" alt="Divine Sigil" class="sigil-img">
                    </div>
                    <div class="logo-text">
                        <h1>The Ashen Realms</h1>
                        <span class="subtitle">Player Compendium</span>
                    </div>
                </div>
            </div>

            <div class="search-wrapper">
                <div class="search-container">
                    <i data-lucide="search" class="search-icon"></i>
                    <input type="text" id="search" placeholder="Search..." autocomplete="off">
                    <kbd class="search-hint">Ctrl+K</kbd>
                </div>
            </div>

            <div class="nav-links">
                <a href="#" class="nav-special-link" id="bonds-link">
                    <i data-lucide="users"></i>
                    <span>Bonds & Standing</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-categories" id="nav-categories"></div>
            </div>

            <div class="sidebar-footer">
                <div class="footer-quote">
                    <em>"The Maker is dead. The Sovereigns reign."</em>
                </div>
            </div>
        </nav>

        <main class="main-content">
            <div class="reading-progress" id="reading-progress"></div>
            <header class="top-bar">
                <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu">
                    <i data-lucide="menu"></i>
                </button>
                <div class="breadcrumb" id="breadcrumb">
                    <span class="breadcrumb-home">Compendium</span>
                </div>
                <div class="top-bar-actions">
                    <button id="random-article-btn" class="action-btn" aria-label="Random article" title="Random article">
                        <i data-lucide="shuffle"></i>
                    </button>
                    <button id="copy-link-btn" class="action-btn" aria-label="Copy link" title="Copy link to clipboard">
                        <i data-lucide="link"></i>
                    </button>
                    <button id="bookmark-btn" class="action-btn" aria-label="Bookmark article" title="Bookmark this article">
                        <i data-lucide="bookmark"></i>
                    </button>
                </div>
                <div class="audio-controls" id="audio-controls">
                    <button id="prev-track-btn" class="audio-btn" aria-label="Previous track">
                        <i data-lucide="skip-back"></i>
                    </button>
                    <button id="mute-btn" class="mute-btn" aria-label="Toggle mute">
                        <i data-lucide="volume-2" id="volume-icon"></i>
                    </button>
                    <button id="next-track-btn" class="audio-btn" aria-label="Next track">
                        <i data-lucide="skip-forward"></i>
                    </button>
                    <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="30">
                    <span id="track-name" class="track-name"></span>
                </div>
            </header>

            <div class="content-wrapper">
                <div class="content-body" id="content-body"></div>
            </div>
        </main>
    </div>

    <div class="search-modal" id="search-modal">
        <div class="search-modal-backdrop"></div>
        <div class="search-modal-content">
            <div class="search-modal-input">
                <i data-lucide="search"></i>
                <input type="text" id="modal-search" placeholder="Search..." autocomplete="off">
                <kbd>Esc</kbd>
            </div>
            <div class="search-filters" id="search-filters"></div>
            <div class="search-modal-results" id="modal-search-results"></div>
        </div>
    </div>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="back-to-top" aria-label="Back to top">
        <i data-lucide="chevron-up"></i>
    </button>

    <!-- Medium-Zoom handles image viewing now (no HTML needed) -->

    <script src="app.js"></script>
</body>
</html>
